"use strict";(self.webpackChunkoh_my_scripts=self.webpackChunkoh_my_scripts||[]).push([[232],{7725:function(t,e,n){var s=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(o,c){function i(t){try{a(s.next(t))}catch(t){c(t)}}function r(t){try{a(s.throw(t))}catch(t){c(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,r)}a((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.inline=void 0,n(1801);const o=n(2041);function c(t){return(0,o.isAbsolutePath)(t)||t.startsWith("/")}e.inline=function({base:t,html:e,folder:n="",load:i=(()=>Promise.resolve(""))}){return s(this,void 0,void 0,(function*(){const r=window.cheerio.load(e),a={css:{callback:t=>s(this,void 0,void 0,(function*(){const e=r(t).attr("href");if(e)return(t=>{const e=c(t);return i(e?t:(0,o.normalisePath)(`${n}/${t}`))})(e).then((t=>{!function(t,e,n,s="",o={}){const c=document.createElement(n);for(const[t,e]of Object.entries(o))c.setAttribute(t,`${e}`);c.innerHTML=s,t(e).append(c.outerHTML)}(r,"head","style",t,{type:"text/css"})}))})),cleanup:!0,selector:'link[rel="stylesheet"]',tasks:[]},img:{callback:e=>s(this,void 0,void 0,(function*(){const n=r(e).attr("src");if(!n)return;const s=c(n)?n:`${t}/${n}`;r(e).attr("src",s)})),selector:"img",tasks:[]},js:{callback:()=>s(this,void 0,void 0,(function*(){})),cleanup:!0,selector:'script[src*=".js"]',tasks:[]}},l=[];for(const[,t]of Object.entries(a)){if(!t.selector)continue;const e=r(t.selector);e.each(((e,n)=>t.tasks.push(t.callback(n)))),l.push(Promise.all(t.tasks).then((()=>t.cleanup&&e.remove())))}return yield Promise.all(l),r.html()}))}}}]);