(self.webpackChunkoh_my_scripts=self.webpackChunkoh_my_scripts||[]).push([[830],{5008:function(t,e,n){"use strict";var i,o=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.onAjaxedPagesRaw=e.isPRFiles=e.isSingleFile=e.isCommit=e.getCommitSha=e.getRepoPath=e.getUserRepo=e.getCleanPathname=e.githubApi=void 0;var a,c,u=n(7819),p=n(1603),l="github.com"===location.hostname?"https://api.github.com/":location.origin+"/api/v3/",h="commits?/[0-9a-f]{5,40}",f=u.ns(a||(a=o(["GITHUB_TOKEN"],["GITHUB_TOKEN"]))),g=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e.join("\n"))||this}return r(e,t),e}(Error);function d(){return window.localStorage.getItem(f)}function m(){return location.pathname.replace(/^[/]|[/]$/g,"")}function b(){return m().split("/").slice(2).join("/")}e.githubApi={v3:function(t,e){void 0===e&&(e={accept404:!1});var n=d();return p.request(l+t,{headers:s({Accept:"application/vnd.github.v3+json","User-Agent":u.ns(c||(c=o(["user-script"],["user-script"])))},n?{Authorization:"token "+n}:{})}).then((function(t){var n;return null===(n=t.text)||void 0===n?void 0:n.call(t).then((function(n){var i=n.length>0?JSON.parse(n):{status:t.status};if(t.ok||!0===e.accept404&&404===t.status)return i;throw function(t){return"string"==typeof t.message&&t.message.includes("API rate limit exceeded")?new g("Rate limit exceeded.",d()?"It may be time for a walk!":"Set your token in the options or take a walk!"," üçÉ üåû"):"Bad credentials"===t.message?new g("The token seems to be incorrect or expired. Update it in the options."):new g("Unable to fetch.",d()?"Ensure that your token has access to this repo.":"Maybe adding a token in the options will fix this issue.",JSON.stringify(t,void 0,"\t"))}(i)}))}))}},e.getCleanPathname=m,e.getUserRepo=function(){return m().split("/").slice(0,2).join("/")},e.getRepoPath=b,e.getCommitSha=function(){var t=b().match(h);if(t)return t[0].split("/")[1]},e.isCommit=function(){return new RegExp("^"+h).test(b())||new RegExp("^pull/\\d+/"+h).test(b())},e.isSingleFile=function(){return/^blob\//.test(b())},e.isPRFiles=function(){return new RegExp("^pull/\\d+/files").test(b())},e.onAjaxedPagesRaw=function(t){document.addEventListener("pjax:end",t),t()}}}]);